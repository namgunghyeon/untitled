machine:
  node:
    version: 8.1.2

dependencies:
  pre:
    - npm install node-sass

test:
  override:
    - echo "No Tests"

deployment:
  master:
    branch: master
    commands:
      - git clone git@github.com:namgunghyeon/untitled.git
      - cd untitled/ && npm install
      - cd untitled/client/ && npm install
      - cd untitled/ && npm run build && cd .. && rsync -avz untitled/ root@45.32.38.24:~/test
      - ssh root@45.32.38.24 '/root/.nvm/versions/node/v8.1.2/bin/npm install pm2 && /root/.nvm/versions/node/v8.1.2/bin/pm2 kill && cd ~/test && /root/.nvm/versions/node/v8.1.2/bin/pm2 start npm --name "untitled" -- run deploy'
